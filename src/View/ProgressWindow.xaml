<Window
    x:Class="ReciteHelper.View.ProgressWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:ReciteHelper.View"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="进度监控"
    Width="500"
    Height="320"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterOwner"
    WindowStyle="SingleBorderWindow"
    mc:Ignorable="d">

    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <Style TargetType="ProgressBar">
            <Setter Property="Height" Value="16" />
            <Setter Property="Margin" Value="0,8" />
            <Setter Property="Foreground" Value="#007ACC" />
        </Style>

        <Style x:Key="ProgressLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="#555" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>

        <Style x:Key="ProgressValue" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="#007ACC" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>

        <LinearGradientBrush x:Key="WindowBackground" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Offset="0" Color="#F5F9FF" />
            <GradientStop Offset="1" Color="#FFFFFF" />
        </LinearGradientBrush>
    </Window.Resources>

    <Grid Background="{StaticResource WindowBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Title Area  -->
        <Border
            Grid.Row="0"
            Padding="20,15"
            Background="#007ACC">
            <TextBlock
                HorizontalAlignment="Center"
                FontSize="18"
                FontWeight="Bold"
                Foreground="White"
                Text="扫描进度监控" />
        </Border>

        <StackPanel Grid.Row="1" Margin="30,25">

            <!--  Number of scan cycles  -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Style="{StaticResource ProgressLabel}"
                        Text="扫描轮数" />

                    <TextBlock Grid.Column="2" Style="{StaticResource ProgressValue}">
                        <Run Text="{Binding RoundCurrent, Mode=OneWay}" />
                        <Run Text="/" />
                        <Run Text="{Binding RoundTotal, Mode=OneWay}" />
                    </TextBlock>
                </Grid>

                <ProgressBar
                    Grid.Row="1"
                    Maximum="{Binding RoundTotal, Mode=OneWay}"
                    Value="{Binding RoundCurrent, Mode=OneWay}" />
            </Grid>

            <!--  Scan count  -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Style="{StaticResource ProgressLabel}"
                        Text="当前轮次扫描" />

                    <TextBlock Grid.Column="2" Style="{StaticResource ProgressValue}">
                        <Run Text="{Binding ScanCurrent, Mode=OneWay}" />
                        <Run Text="/" />
                        <Run Text="{Binding ScanTotal, Mode=OneWay}" />
                    </TextBlock>
                </Grid>

                <ProgressBar
                    Grid.Row="1"
                    Maximum="{Binding ScanTotal, Mode=OneWay}"
                    Value="{Binding ScanCurrent, Mode=OneWay}" />
            </Grid>

            <!--  聚类进度  -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Style="{StaticResource ProgressLabel}"
                        Text="总计数" />

                    <TextBlock Grid.Column="2" Style="{StaticResource ProgressValue}">
                        <Run Text="{Binding ClusterCurrent, Mode=OneWay}" />
                        <Run Text="/" />
                        <Run Text="{Binding ClusterTotal, Mode=OneWay}" />
                    </TextBlock>
                </Grid>

                <ProgressBar
                    Grid.Row="1"
                    Maximum="{Binding ClusterTotal, Mode=OneWay}"
                    Value="{Binding ClusterCurrent, Mode=OneWay}" />
            </Grid>
        </StackPanel>

        <Border
            Grid.Row="2"
            Background="#F0F4F9"
            BorderBrush="#E0E6ED"
            BorderThickness="0,1,0,0">
            <TextBlock
                Margin="15,10"
                FontSize="12"
                Foreground="#666"
                Text="请勿关闭窗口，处理完成后会自动关闭..." />
        </Border>
    </Grid>
</Window>